<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>学觅网</title>
    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/myroute.css" rel="stylesheet">

    <body id="top">

        {% include 'navbar.html' %}

        <div class="jumbotron">
            <div class="container off-con">
                <h1>{{ route.title }}</h1>
                <p>作者：<span>{{ route.author.nickname }}</span></p>
                <p>评分：<span>{{ route.avg_rate }}</span></p>
                <div class="star-rating">
                    <select id="example-f" name="rating">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="container off-con">
                <div class="detail">
                    <div class="row">
                        <div class="rt-n col-md-9 gray">
                            <span title="创建时间" class="glyphicon glyphicon-time">{{ route.formatted_time }}</span>
                            <span title="参与人数" class="glyphicon glyphicon-user">{{ route.stat['n_joined'] }}</span>
                            <span title="完成人数" class="glyphicon glyphicon-ok">{{ route.stat['n_completed'] }}</span>
                            <span title="评分人数" class="glyphicon glyphicon-star">{{ route.stat['n_rate'] }}</span>
                            <hr>
                        </div>
                        <div class="col-md-3">
                            <input type="button" id="rt-join" class="btn btn-primary btn-block rt-join" value="加入路线">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-9 col-sm-12 col-sx-12 rt-detail">
                            {{ route.cleaned_content | safe}}
                        </div>
                        <div class="col-md-3 col-sm-12 col-sx-12 rt-source">
                            <div class="book">
                                <p>推荐书籍</p>
                                <hr>
                                <div class="row">
                                    <div class="col-md-6 col-sm-3 col-xs-6 bk-img">
                                        <img src="http://book.rednode.cn/covers/web-development-with-node-express.png" alt="">
                                    </div>
                                    <div class="col-md-6 col-sm-3 col-xs-6">
                                        <ul>
                                            <li>书名:<a href="#" title="进入豆瓣查看详细信息"><span>Node.js Products and Expertise</span></a></li>
                                            <li>作者:<span> StrongLoop</span></li>
                                            <li>出版日期: <span>2014</span></li>
                                        </ul>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-6 col-sm-3 col-xs-6 bk-img">
                                        <img src="http://book.rednode.cn/covers/web-development-with-node-express.png" alt="">
                                    </div>
                                    <div class="col-md-6 col-sm-3 col-xs-6">
                                        <ul>
                                            <li>书名:<a href="#" title="进入豆瓣查看详细信息"><span>Node.js Products and Expertise</span></a></li>
                                            <li>作者:<span> StrongLoop</span></li>
                                            <li>出版日期: <span>2014</span></li>
                                        </ul>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-6 col-sm-3 col-xs-6 bk-img">
                                        <img src="http://book.rednode.cn/covers/web-development-with-node-express.png" alt="">
                                    </div>
                                    <div class="col-md-6 col-sm-3 col-xs-6">
                                        <ul>
                                            <li>书名:<a href="#" title="进入豆瓣查看详细信息"><span>Node.js Products and Expertise</span></a></li>
                                            <li>作者:<span> StrongLoop</span></li>
                                            <li>出版日期: <span>2014</span></li>
                                        </ul>
                                        <span id="like-e" class="glyphicon glyphicon-heart-empty"></span>
                                         <span id="like" class="glyphicon glyphicon-heart"></span>
                                         <span id="num" class="n-like">15</span>
                                    </div>
                                </div>
                            </div>
                            <!--end-of-book-->
                            <div class="link">
                                <p>相关链接</p>
                                <hr>
                                <a href="http://book.rednode.cn/">史上最全的Node.js书籍集合— —For those who love Node.js</a>
                                <hr>
                                <a href="http://book.rednode.cn/">史上最全的Node.js书籍集合— —For those who love Node.js</a>
                            </div>
                            <!--end-of-link-->
                        </div>
                        <!--end-of-rt-source-->
                    </div>
                </div>
                <div id="comment"></div>
                <hr>
                <div class="footer">
                    <ul class="menu">
                        <li>©MYROUTE All Rights Reserved</li> |
                        <li>Design:YZTeam</li>
                    </ul>
                </div>
            </div>
            <!--container-->
        </div>
        <!--container-fluid-->
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="/static/js/jquery.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="/static/js/bootstrap.min.js"></script>
        <script src="/static/js/jquery.barrating.js"></script>
        <script src="/static/js/starrating.js"></script>
        <script>
        $(function() {
            //当滚动条的位置处于距顶部0像素以下时，跳转链接出现，否则消失  
            $(function() {
                $(window).scroll(function() {
                    if ($(window).scrollTop() > 0) {
                        $("#totop").fadeIn(1500);
                    } else {
                        $("#totop").fadeOut(1500);
                    }
                });

                //当点击跳转链接后，回到页面顶部位置  

                $("#totop").click(function() {
                    $('body,html').animate({
                        scrollTop: 0
                    }, 1000);
                    return false;

                });
            });
        });

        $("#rt-join").click(function() {
            document.getElementById("rt-join").value = "已加入路线";
        });
        $("#like-e").click(function() {  
            var onum = $("#num");
            var num = parseInt(onum.text());
            document.getElementById("like-e").style.display="none";
            document.getElementById("like").style.display="inline";
            num++;
            onum.text(num);

        });
          $("#like").click(function() {  
            var onum = $("#num");
            var num = parseInt(onum.text());
            document.getElementById("like").style.display="none";
            document.getElementById("like-e").style.display="inline";
            num--;
            onum.text(num);
        });
        </script>
    </body>

</html>
